<div class="customer-container">
  <h2>
    Customer Management
    <img src="assets/client.png" alt="Customer Icon" style="height: 30px; width: 30px" />
  </h2>

  <button (click)="startAddingCustomer()" class="primary-btn">
    <i class="pi pi-plus"></i> Add Customer
  </button>

  <div *ngIf="errorMessage" class="error">{{ errorMessage }}</div>

  <!-- Add Customer Form -->
  <div *ngIf="isAdding" class="form-section">
    <h3>Add New Customer</h3>
    <form [formGroup]="customerForm" (ngSubmit)="addCustomer()">
      <div class="form-group">
        <label for="name">Name</label>
        <input id="name" formControlName="customerName" class="form-control" />
        <div *ngIf="customerForm.get('customerName')?.invalid && customerForm.get('customerName')?.touched" class="error-msg">
          Name is required.
        </div>
      </div>

      <div class="form-group">
        <label for="address">Address</label>
        <input id="address" formControlName="address" class="form-control" />
        <div *ngIf="customerForm.get('address')?.invalid && customerForm.get('address')?.touched" class="error-msg">
          Address is required.
        </div>
      </div>

      <div class="form-group">
        <label for="email">Email</label>
        <input id="email" formControlName="email" class="form-control" />
        <div *ngIf="customerForm.get('email')?.invalid && customerForm.get('email')?.touched" class="error-msg">
          Valid email is required.
        </div>
      </div>

      <div class="form-group">
        <label for="phone">Phone</label>
        <input id="phone" formControlName="phone" class="form-control" />
        <div *ngIf="customerForm.get('phone')?.invalid && customerForm.get('phone')?.touched" class="error-msg">
          Phone must be 8-15 digits.
        </div>
      </div>

      <div class="button-group">
        <button type="submit" [disabled]="customerForm.invalid" class="primary-btn">
          <i class="pi pi-check"></i> Create
        </button>
        <button type="button" (click)="cancelAdding()" class="secondary-btn">
          <i class="pi pi-times"></i> Cancel
        </button>
      </div>
    </form>
  </div>

  <!-- Customer List -->
  <div *ngIf="customers.length > 0" class="customer-list">
    <h3>Customers</h3>
    <ul>
      <li *ngFor="let customer of customers" (click)="selectCustomer(customer)">
        {{ customer.customerName }} ({{ customer.email }})
      </li>
    </ul>
  </div>

  <!-- Selected Customer Details -->
  <div *ngIf="selectedCustomer" class="selected-customer">
    <h3>Selected: {{ selectedCustomer.customerName }}</h3>

    <form *ngIf="isEditing" [formGroup]="editForm" (ngSubmit)="updateCustomer()">
      <div class="form-group">
        <label for="editName">Name</label>
        <input id="editName" formControlName="customerName" class="form-control" />
        <div *ngIf="editForm.get('customerName')?.invalid && editForm.get('customerName')?.touched" class="error-msg">
          Name is required.
        </div>
      </div>

      <div class="form-group">
        <label for="editAddress">Address</label>
        <input id="editAddress" formControlName="address" class="form-control" />
        <div *ngIf="editForm.get('address')?.invalid && editForm.get('address')?.touched" class="error-msg">
          Address is required.
        </div>
      </div>

      <div class="form-group">
        <label for="editEmail">Email</label>
        <input id="editEmail" formControlName="email" class="form-control" />
        <div *ngIf="editForm.get('email')?.invalid && editForm.get('email')?.touched" class="error-msg">
          Valid email is required.
        </div>
      </div>

      <div class="form-group">
        <label for="editPhone">Phone</label>
        <input id="editPhone" formControlName="phone" class="form-control" />
        <div *ngIf="editForm.get('phone')?.invalid && editForm.get('phone')?.touched" class="error-msg">
          Phone must be 8-15 digits.
        </div>
      </div>

      <div class="button-group">
        <button type="submit" [disabled]="editForm.invalid" class="primary-btn">
          <i class="pi pi-save"></i> Save
        </button>
      </div>
    </form>

    <div *ngIf="!isEditing" class="action-buttons">
      <button class="edit-button" (click)="editCustomer()">
        <i class="pi pi-pencil"></i> Edit
      </button>
      <button class="delete-button" (click)="deleteCustomer()">
        <i class="pi pi-trash"></i> Delete
      </button>
    </div>
  </div>
</div>
